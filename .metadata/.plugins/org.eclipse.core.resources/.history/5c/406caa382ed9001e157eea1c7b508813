package com.arya.OrderService.Service;

import java.util.List;
import java.util.UUID;

import com.arya.OrderService.DTO.OrderItemDTO;
import com.arya.OrderService.DTO.OrderRequestDTO;
import com.arya.OrderService.Model.Order;
import com.arya.OrderService.Model.OrderItems;
import com.arya.OrderService.Repository.OrderRepository;

import lombok.RequiredArgsConstructor;

//@RequiredArgsConstructor
public class orderService {
	final private OrderRepository repo;
	
	public void placeOrder(OrderRequestDTO orderRequest) {
		Order order=new Order();
		order.setOrderNumber(UUID.randomUUID().toString());
		
		List<OrderItems> list=orderRequest.getList().stream().map(a->mapToDto(a)).toList();
		order.setOrderitems(list);
		
		repo.save(order);
	}

	private OrderItems mapToDto(OrderItemDTO a) {
		OrderItems orderItems=new OrderItems();
		orderItems.setPrice(a.getPrice());
		orderItems.setQuantity(a.getQuantity());
		orderItems.setSkucode(a.getSkucode());
		return orderItems;
	}
}
